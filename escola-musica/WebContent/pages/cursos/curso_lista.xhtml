<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<title>Cursos cadastrados</title>
</h:head>
<h:body>
	<h:form>
		<p:growl />
		<p:panel header="Cursos cadastrados">


			<p:growl />
			<p:dataTable value="#{cursoBean.cursos}" var="curso" rows="10"
				paginator="true"
				paginatorPosition="bottom"
				paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
				rowsPerPageTemplate="5,10,15" 
				id="tabela-cursos">

				<!-- 		private Long id; -->
				<!-- 		private String nome; -->
				<!-- 		private String descricao; -->
				<!-- 		private Date dataCriacao; -->
				<!-- 		private double duracao; -->
				<!-- 		private TipoCurso tipo; -->

				<p:column headerText="Código" sortBy="#{curso.id}">
					<h:outputText value="#{curso.id}" />
				</p:column>

				<p:column headerText="Nome" sortBy="#{curso.nome}" filterBy="#{curso.nome}" filterMatchMode="contains">
					<h:outputText value="#{curso.nome}" />
				</p:column>

				<!--	Descrição é muito grande para ser exibida -->
				<!-- 	<p:column headerText="Descricao"> -->
				<!-- 	<h:outputText value="#{curso.descricao}"/> -->
				<!-- 	</p:column> -->

				<p:column headerText="Duracao" sortBy="#{curso.duracao}">
					<h:outputText value="#{curso.duracao}" />
				</p:column>

				<p:column headerText="Tipo" sortBy="#{curso.tipo.label}" filterBy="#{curso.tipo.label}">
					<h:outputText value="#{curso.tipo.label}" />
				</p:column>

				<p:column headerText="Data Criação" sortBy="#{curso.dataCriacao}">
					<h:outputText value="#{curso.dataCriacao}">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</h:outputText>
				</p:column>
				<p:column exportable="false">
					<p:commandLink value="Editar" action="#{cursoBean.edit(curso)}" />
				</p:column>
				<p:column exportable="false">
					<p:commandLink value="Deletar"
						action="#{cursoBean.holdInstance(curso)}"
						oncomplete="PF('confirmarExclusaoDialog').show();" update="@form" />
				</p:column>
			</p:dataTable>

			<p:confirmDialog
				message="#{msgs_erro['confirma_exclusao']} curso de id #{cursoBean.curso.id} ?"
				widgetVar="confirmarExclusaoDialog">
				<p:commandButton value="Sim" action="#{cursoBean.remove()}"
					oncomplete="PF('confirmarExclusaoDialog').hide();" update="@form" />
				<p:commandButton value="Não"
					oncomplete="PF('confirmarExclusaoDialog').hide();" update="@form" />
			</p:confirmDialog>

		</p:panel>

		<p:button value="Novo Curso" outcome="curso_formulario" />
		<h:commandLink value="Exportar XLS">
			<p:graphicImage libary="imagens" name="exportar_xls.png"/>
			<p:dataExporter type="xls" target="tabela-cursos" fileName="cursos" />
		</h:commandLink>
		
		<h:commandLink value="Exportar PDF" style="margin-left:10px">
			<p:graphicImage libary="imagens" name="exportar_pdf.png"/>
			<p:dataExporter type="pdf" target="tabela-cursos" fileName="cursos" encoding="iso-8859-1"/>
		</h:commandLink>
		
	</h:form>
</h:body>
</html>